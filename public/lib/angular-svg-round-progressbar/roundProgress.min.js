"use strict";angular.module("angular-svg-round-progress",[]).directive("roundProgress",["$timeout",function(a){if(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)return{restrict:"EA",template:'<div class="round-progress"></div>',replace:!0};!function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var b=function(a,b,c,d){var e=(d-90)*Math.PI/180;return{x:a+c*Math.cos(e),y:b+c*Math.sin(e)}},c=function(a,c,d,e,f,g){if(f){var a=a>=c?c-1e-5:a,h=g?180:359.9999,i=a/c*h,j=f/2,k=b(j,j,d,i),l=b(j,j,d,0),m=180>=i?"0":"1",n=["M",k.x,k.y,"A",d,d,0,m,0,l.x,l.y].join(" ");e.attr("d",n)}},d=function(a,b,c,d){return c*(Math.pow(a/d-1,3)+1)+b};return{restrict:"EA",scope:{current:"=",max:"=",semi:"=",radius:"@",color:"@",bgcolor:"@",stroke:"@"},link:function(b,e){var i,j,g=e.find("path"),h=e.find("circle"),k=function(){a(function(){var a=b.semi,c=b.radius,d=b.stroke;i=2*c+2*parseInt(d),e.attr({width:i,height:a?i/2:i}).css({overflow:"hidden"}),g.attr({stroke:b.color,"stroke-width":d,transform:a?"translate(0,"+i+") rotate(-90)":""}),h.attr({cx:c,cy:c,transform:"translate("+d+", "+d+")",r:c,stroke:b.bgcolor,"stroke-width":d}),l(b.current,b.current)})},l=function(a,e){if(!angular.isDefined(a))return!1;if(0>a)return j=e,b.current=0;if(a>b.max)return j=e,b.current=b.max;var f=b.max,h=b.radius,k=b.semi,l=e===a?0:e||0,m=a-l,n=0,o=50;angular.isNumber(j)&&(l=j,m=a-j,j=null),function p(){o>=n&&(c(d(n,l,m,o),f,h,g,i,k),requestAnimationFrame(p),n++)}()};b.$on("renderCircle",k),b.$watch("current",l),k()},replace:!0,template:'                <svg class="round-progress" xmlns="http://www.w3.org/2000/svg">                    <circle fill="none"/>                    <path fill="none" />                </svg>'}}]);